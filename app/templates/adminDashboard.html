<!-- myapp/templates/index.html -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Admin Dashboard | Task Hub</title>
  </head>
  <body>
    <!-- component -->
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700,900&display=swap"
      rel="stylesheet"
    />

    <div>
      {% for message in messages %}

      <div
        class="flex justify-center items-center m-1 font-medium py-1 px-2 bg-white rounded-md text-red-700 bg-red-100 border border-red-300"
      >
        <div slot="avatar">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="100%"
            height="100%"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="feather feather-alert-octagon w-5 h-5 mx-2"
          >
            <polygon
              points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"
            ></polygon>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        </div>
        <div class="text-xl font-normal max-w-full flex-initial">
          {{ message }}
        </div>
        <div class="flex flex-auto flex-row-reverse">
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="100%"
              height="100%"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-x cursor-pointer hover:text-red-400 rounded-full w-5 h-5 ml-2"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </div>
        </div>
      </div>

      {% endfor %} {% if error_message %}

      <div
        class="flex justify-center items-center m-1 font-medium py-1 px-2 bg-white rounded-md text-red-700 bg-red-100 border border-red-300"
      >
        <div slot="avatar">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="100%"
            height="100%"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="feather feather-alert-octagon w-5 h-5 mx-2"
          >
            <polygon
              points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"
            ></polygon>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        </div>
        <div class="text-xl font-normal max-w-full flex-initial">
          {{ error_message }}
        </div>
        <div class="flex flex-auto flex-row-reverse">
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="100%"
              height="100%"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-x cursor-pointer hover:text-red-400 rounded-full w-5 h-5 ml-2"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </div>
        </div>
      </div>

      {% endif %} {% if success_message %}

      <div
        class="flex justify-center items-center m-1 font-medium py-1 px-2 bg-white rounded-md text-red-700 bg-red-100 border border-red-300"
      >
        <div slot="avatar">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="100%"
            height="100%"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="feather feather-alert-octagon w-5 h-5 mx-2"
          >
            <polygon
              points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"
            ></polygon>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        </div>
        <div class="text-xl font-normal max-w-full flex-initial">
          {{ success_message }}
        </div>
        <div class="flex flex-auto flex-row-reverse">
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="100%"
              height="100%"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-x cursor-pointer hover:text-red-400 rounded-full w-5 h-5 ml-2"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </div>
        </div>
      </div>

      {% endif %}
    </div>
    <main class="bg-gray-100 font-montserrat">
      <header class="h-24 sm:h-32 flex items-center">
        <div
          class="container mx-auto px-6 sm:px-12 flex items-center justify-between"
        >
          <a
            href="/"
            class="font-black text-blue-900 text-2xl flex items-start"
          >
            Taskhub<span class="w-3 h-3 rounded-full bg-indigo-600 ml-2"></span>
          </a>
          <div class="flex items-center">
            <nav class="text-indigo-900 text-lg hidden lg:flex items-center">
              <a
                href="/adminDashboard"
                class="py-2 px-8 flex hover:text-indigo-700"
              >
                Dashboard
              </a>

              {% if user_data %} Hey!, {{user_data.username }}

              <form id="logoutForm" action="/adminLogout" method="post">
                <button
                  class="py-2 px-8 bg-red-600 ml-2 text-white rounded-full flex hover:text-indigo-700"
                >
                  Logout
                </button>
              </form>

              {% endif %}
            </nav>
            <!-- <button class="flex flex-col ml-4">
              <span class="w-6 h-1 rounded-full bg-indigo-800 mb-1"></span>
              <span class="w-6 h-1 rounded-full bg-indigo-800 mb-1"></span>
              <span class="w-6 h-1 rounded-full bg-indigo-800 mb-1"></span>
            </button> -->
          </div>
        </div>
      </header>

      <!-- component -->
      <div class="ml-10 mr-10 mb-10">
        <dl class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3">
          <div
            class="relative overflow-hidden rounded-lg bg-gray-600 px-4 pb-12 pt-5 shadow sm:px-6 sm:pt-6"
          >
            <dt>
              <div class="absolute rounded-md bg-red-600 p-3">
                <svg
                  class="h-6 w-6 text-gray-900"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"
                  />
                </svg>
              </div>
              <p class="ml-16 truncate text-sm font-medium text-gray-300">
                Total Users
              </p>
            </dt>
            <dd class="ml-16 flex items-baseline pb-6 sm:pb-7">
              <p class="text-3xl font-semibold text-gray-100">
                {% if numberofuser %} {{numberofuser }} {% endif %}
              </p>
            </dd>
          </div>

          <div
            class="relative overflow-hidden px-4 pb-12 pt-5 sm:px-6 sm:pt-6"
          ></div>

          <div
            class="relative overflow-hidden rounded-lg bg-gray-600 px-4 pb-12 pt-5 shadow sm:px-6 sm:pt-6"
          >
            <dt>
              <div class="absolute rounded-md bg-orange-500 p-3">
                <svg
                  class="h-6 w-6 text-white"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M21.75 9v.906a2.25 2.25 0 01-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 001.183 1.981l6.478 3.488m8.839 2.51l-4.66-2.51m0 0l-1.023-.55a2.25 2.25 0 00-2.134 0l-1.022.55m0 0l-4.661 2.51m16.5 1.615a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V8.844a2.25 2.25 0 011.183-1.98l7.5-4.04a2.25 2.25 0 012.134 0l7.5 4.04a2.25 2.25 0 011.183 1.98V19.5z"
                  />
                </svg>
              </div>
              <p class="ml-16 truncate text-sm font-medium text-gray-300">
                Total Feedbacks
              </p>
            </dt>
            <dd class="ml-16 flex items-baseline pb-6 sm:pb-7">
              <p class="text-2xl font-semibold text-gray-100">
                {% if numberoffeedback %} {{numberoffeedback }} {% endif %}
              </p>
            </dd>
          </div>
        </dl>
      </div>

      <!-- component -->
      <div class="flex">
        <div class="border-collapse w-full mr-2">
          <h1 class="text-2xl">Users List</h1>
          <table class="border-collapse w-full">
            <thead>
              <tr>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Username
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Email
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Usertype
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody>
              {% for user in users %}
              <tr
                class="bg-white lg:hover:bg-gray-100 flex lg:table-row flex-row lg:flex-row flex-wrap lg:flex-no-wrap mb-10 lg:mb-0"
              >
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static"
                >
                  {{user.username}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  {{user.email}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  {{user.usertype}}
                </td>

                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  <form id="deleteForm" action="/deleteUser" method="POST">
                    <input
                      type="hidden"
                      name="user_id"
                      value="{{ user._id }}"
                    />

                    <button
                      type="submit"
                      class="underline text-blue-400 hover:text-blue-600 underline pl-6"
                    >
                      Remove
                    </button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="border-collapse w-full">
          <h1 class="text-2xl">Feedback List</h1>

          <table class="border-collapse w-full">
            <thead>
              <tr>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Name
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Email
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Phone
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Subject
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Message
                </th>
                <th
                  class="p-3 font-bold uppercase bg-gray-200 text-gray-600 border border-gray-300 hidden lg:table-cell"
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody>
              {% for feedback in feedbacks %}
              <tr
                class="bg-white lg:hover:bg-gray-100 flex lg:table-row flex-row lg:flex-row flex-wrap lg:flex-no-wrap mb-10 lg:mb-0"
              >
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static"
                >
                  {{feedback.fullname}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  {{feedback.email}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  {{feedback.phonenumber}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  {{feedback.subject}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  {{feedback.message}}
                </td>
                <td
                  class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b text-center block lg:table-cell relative lg:static"
                >
                  <span
                    class="lg:hidden absolute top-0 left-0 bg-blue-200 px-2 py-1 text-xs font-bold uppercase"
                    >Actions</span
                  >

                  <form id="deleteForm" action="/deleteFeedback" method="POST">
                    <input
                      type="hidden"
                      name="feedback_id"
                      value="{{ feedback._id }}"
                    />

                    <button
                      type="submit"
                      class="underline text-blue-400 hover:text-blue-600 underline pl-6"
                    >
                      Remove
                    </button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </body>
</html>
